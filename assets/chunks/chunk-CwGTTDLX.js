import{b as r,d as E,aY as U,az as W,al as R,am as o,Z as b,B as y,_ as i,g as I,C as m,e as q,a8 as X,aL as F,v as Y,c as Z,b9 as B,r as w,a$ as G,L as J,aK as Q,ae as V}from"./chunk-C-sTROv_.js";import{x as K,$ as x}from"./chunk-hEwjt6n3.js";import{I as S,B as M}from"./chunk-DyJ97TPu.js";/* empty css              *//* empty css              */var ee={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};function j(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},a=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),a.forEach(function(l){te(e,l,n[l])})}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(t,n){var a=j({},t,n.attrs);return r(S,j({},a,{icon:ee}),null)};L.displayName="CloseOutlined";L.inheritAttrs=!1;var ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"};function k(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},a=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),a.forEach(function(l){ae(e,l,n[l])})}return e}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(t,n){var a=k({},t,n.attrs);return r(S,k({},a,{icon:ne}),null)};P.displayName="CloudUploadOutlined";P.inheritAttrs=!1;var le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"};function D(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},a=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),a.forEach(function(l){re(e,l,n[l])})}return e}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(t,n){var a=D({},t,n.attrs);return r(S,D({},a,{icon:le}),null)};_.displayName="LinkOutlined";_.inheritAttrs=!1;var oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"};function z(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},a=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable}))),a.forEach(function(l){se(e,l,n[l])})}return e}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(t,n){var a=z({},t,n.attrs);return r(S,z({},a,{icon:oe}),null)};A.displayName="SendOutlined";A.inheritAttrs=!1;const ie={fileList:{type:Array,default:void 0},action:{type:String,default:""},modelValue:{type:String,default:""},loading:{type:Boolean,default:void 0},modules:{type:Array,default:()=>[]},sendDisabled:{type:Boolean,default:!1}},ce={"update:fileList":e=>!0,"update:modelValue":e=>!0,submit:e=>!0,cancel:null},de=E({name:"AXSenderHeader",components:{ElCollapseTransition:W,AntButton:M,CloseOutlined:L},inheritAttrs:!1,props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:"Sender"},contentRef:{type:Function,default:U}},emits:{"update:modelValue":null},setup(){return{}}}),ue={class:"ant-sender-header-header"},fe={class:"ant-sender-header-header-title"},pe={class:"ant-sender-header-header-close"};function me(e,t,n,a,l,h){const u=o("CloseOutlined"),f=o("AntButton"),c=o("ElCollapseTransition");return y(),b(c,null,{default:i(()=>[I(m("div",q({class:"ant-sender-header"},e.$attrs),[m("div",ue,[m("div",fe,X(e.title),1),m("div",pe,[r(f,{type:"text",size:"small",onClick:t[0]||(t[0]=v=>e.$emit("update:modelValue",!1))},{icon:i(()=>[r(u)]),_:1})])]),m("div",{ref:e.contentRef,class:"ant-sender-header-content"},[F(e.$slots,"default")],512)],16),[[Y,e.modelValue]])]),_:3})}const he=R(de,[["render",me]]),ve=E({name:"VkSender",components:{Sender:x,LinkOutlined:_,AntButton:M,Attachments:K,SenderHeader:he},props:ie,emits:ce,setup(e,{emit:t,slots:n}){const a=Z(()=>e.modules.includes("Attachments")),l=B({key:"loading",default:!1},e,t),h=w(!1),u=(d,$)=>{const{SendButton:p,LoadingButton:O}=$.components,H=()=>r(O,null,null),N=()=>r(p,{type:"text",icon:r(A,null,null),disabled:e.sendDisabled},null),T=()=>l.value?H():N();return r("div",{class:"vk-sender-actions"},[r("div",{class:"vk-sender-actions__before"},[n.actions_before?.()]),r("div",{class:"vk-sender-actions__after"},[n.actions_after?.(),T()])])},f=d=>d==="drop"?{title:"请将文件拖到此处"}:{icon:r(P,null,null),title:"上传文件",description:"点击上传或拖拽文件到此处"},c=B({key:"fileList",default:[]},e,t),v=w(),g=G();return{hasAttachments:a,actionsRender:u,headerOpen:h,attachmentsPlaceholder:f,handlePasteFile:async d=>{h.value=!0;const $=await g.promise;await J();const p=$.querySelector('input[type="file"]');if(p){const O=new DataTransfer;O.items.add(d),p.files=O.files,p.dispatchEvent(new Event("change",{bubbles:!0}))}},attachmentsRef:v,theFileList:c,handleChange:d=>{c.value=d.fileList},attachmentWrapResolve:g.resolve}}});function ge(e,t,n,a,l,h){const u=o("Attachments"),f=o("SenderHeader"),c=o("LinkOutlined"),v=o("AntButton"),g=o("Sender");return y(),b(g,{class:"vk-sender",value:e.modelValue,loading:e.loading,"allow-speech":!0,actions:e.actionsRender,"on-submit":s=>{!e.sendDisabled&&e.$emit("submit",s)},"on-cancel":()=>e.$emit("cancel"),"onUpdate:value":t[2]||(t[2]=s=>e.$emit("update:modelValue",s)),onPasteFile:e.handlePasteFile},Q({header:i(()=>[e.hasAttachments?(y(),b(f,{key:0,modelValue:e.headerOpen,"onUpdate:modelValue":t[0]||(t[0]=s=>e.headerOpen=s),title:"附件","content-ref":e.attachmentWrapResolve},{default:i(()=>[r(u,{ref:"attachmentsRef","file-list":e.theFileList,placeholder:e.attachmentsPlaceholder,action:e.action,multiple:"",onChange:e.handleChange},null,8,["file-list","placeholder","action","onChange"])]),_:1},8,["modelValue","content-ref"])):V("",!0)]),prefix:i(()=>[e.hasAttachments?(y(),b(v,{key:0,type:"text",onClick:t[1]||(t[1]=s=>e.headerOpen=!e.headerOpen)},{icon:i(()=>[r(c)]),_:1})):V("",!0)]),_:2},[e.$slots.footer?{name:"footer",fn:i(()=>[F(e.$slots,"footer")]),key:"0"}:void 0]),1032,["value","loading","actions","on-submit","on-cancel","onPasteFile"])}const C=R(ve,[["render",ge]]);C.install=e=>{e.component(C.name||"VkSender",C)};export{C as V};
