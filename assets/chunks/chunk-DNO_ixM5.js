import{a as T,V as D,t as U}from"./chunk-BynjkOys.js";import{V}from"./chunk-BHottZE4.js";import{S as F,g as E,b as I,p as L}from"./chunk-HBVrCgri.js";import{d as M,p as g,q as N,s as $,r as q,a as z,o as j,b as n,e as k,u as i,t as v,f as l,w as c,v as A,F as _}from"./chunk-D7x09NOF.js";import{c as f}from"./chunk-Di9FnFMJ.js";import{T as u}from"./chunk-CntOc3u2.js";import"./chunk-YBzfwCkb.js";import"./chunk-Db8R8jrI.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */const G={"h-600px":"","w-400px":""},H=`大自然里，草长莺飞，莺歌燕舞，她生活在一个美好的世界里。

然而，当她经过茧里的痛苦与挣扎，终于破茧而出时，却不是一只在空中轻盈飞舞的花蝴蝶，而是蜕变成为了一只灰色的小飞蛾。

在同伴的叹息中，她笑着流下了激动的泪水。`,It=M({__name:"metahuman-broadcasting",setup(J){const S="/vunk-plus/sophontalk/model.onnx",b="/vunk-plus/sophontalk/processed_images.zip",h="/vunk-plus/sophontalk/complete_dataset.json",w=T({access_token:"21c0f2a5067fb1cb"}).then(a=>{localStorage.setItem("accessToken",a),sessionStorage.setItem("accessToken",a)}),x=async a=>(await w,U({application_id:"2c0946f4-02f0-11f0-b881-0242ac170002",text:a}).then(t=>t)),p=new F(S),r=g(u.paused),m=g([]),e=N([]);$(async()=>{await p.when();const{blendingMaskBitmap:a,dataset:t,zipBlob:s}=await E({datasetUrl:h,sourceUrl:b});await p.startStreaming({blendingMaskBitmap:a,dataset:t,zipBlob:s},{onFrame(o){e.push(o)},onProgress(o,d){(d<240&&o===d||o===240)&&(r.value=u.play)}})});async function B(a){await p.when();try{await L(a,{onChunkComplete(t){p.addChunk(t)}})}catch(t){console.error("音频处理错误:",t)}}async function C(a){if(a.blob){f.info("Processing Paragraph",a.blob);try{const t=await I(a.blob);await B(t)}catch(t){f.error("Error processing paragraph:",t)}}}function P({data:a}){f.info("Paragraph Load",a)}function y(a){a&&m.value.length&&(r.value=u.stop,e.length=0)}return(a,t)=>{const s=q("ElButton");return j(),z(_,null,[n(i(D),{status:r.value,data:m.value,"text-to-speech":x,source:H,processing:C,onSetData:t[0]||(t[0]=o=>i(v)(m.value,o)),onParagraphLoad:P,"onUpdate:completed":y},null,8,["status","data"]),k("p",null,[n(s,{onClick:t[1]||(t[1]=()=>console.log(m.value))},{default:c(()=>t[6]||(t[6]=[l(" paragraphData ")])),_:1}),l(" "+A(r.value)+" ",1),n(s,{onClick:t[2]||(t[2]=()=>console.log(e))},{default:c(()=>t[7]||(t[7]=[l(" frameUrls ")])),_:1}),n(s,{onClick:t[3]||(t[3]=()=>r.value=i(u).play)},{default:c(()=>t[8]||(t[8]=[l(" frameStatus ")])),_:1})]),k("div",G,[n(i(V),{status:r.value,"onUpdate:status":t[4]||(t[4]=o=>r.value=o),data:e,onSetData:t[5]||(t[5]=o=>i(v)(e,o))},null,8,["status","data"])])],64)}}});export{It as default};
